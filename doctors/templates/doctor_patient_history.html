{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ patient.name }} - History</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
</head>

<body class="bg-violet-50 min-h-screen flex flex-col md:flex-row font-sans">

  <!-- Main content -->
  <main class="flex-1 p-6 md:p-8 md:ml-64 mt-16 md:mt-10">
    
    <!-- Header + Back Button -->
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4">
      <h2 class="text-2xl md:text-3xl font-bold text-violet-700 text-center sm:text-left">
        ðŸ©º {{ patient.name }} â€” Appointment History
      </h2>

      <button onclick="history.back()" 
        class="bg-violet-600 hover:bg-violet-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition flex items-center justify-center space-x-2 w-full sm:w-auto">
        <i class="fas fa-arrow-left"></i>
        <span>Back</span>
      </button>
    </div>

    {% if appointments %}
      <div class="space-y-4">
        {% for a in appointments %}
          <div class="bg-white rounded-xl shadow p-5 flex flex-col sm:flex-row sm:justify-between sm:items-center border-l-4 gap-3
            {% if a.status == 'Completed' %}
              border-green-500
            {% elif a.status == 'Confirmed' %}
              border-blue-500
            {% elif a.status == 'Cancelled' %}
              border-rose-500
            {% else %}
              border-gray-300
            {% endif %}
          ">
            <div class="flex-1">
              <p class="text-violet-700 font-semibold text-lg md:text-xl">
                {{ a.date|date:"M d, Y" }} at {{ a.time|time:"H:i" }}
              </p>
              <p class="text-gray-600 text-sm md:text-base">Service: 
                <span class="font-medium">{{ a.service }}</span>
              </p>
              <p class="text-gray-500 text-sm md:text-base">
                Status:
                <span class="
                  {% if a.status == 'Completed' %}text-green-600
                  {% elif a.status == 'Confirmed' %}text-blue-600
                  {% elif a.status == 'Cancelled' %}text-rose-600
                  {% else %}text-gray-500{% endif %}
                  font-semibold
                ">
                  {{ a.status }}
                </span>
              </p>
            </div>

            <div class="text-right">
              {% if a.status == 'Completed' %}
                <i class="fas fa-check-circle text-green-500 text-2xl"></i>
              {% elif a.status == 'Confirmed' %}
                <i class="fas fa-calendar-check text-blue-500 text-2xl"></i>
              {% elif a.status == 'Cancelled' %}
                <i class="fas fa-times-circle text-rose-500 text-2xl"></i>
              {% else %}
                <i class="fas fa-hourglass-half text-gray-400 text-2xl"></i>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-500 italic text-center md:text-left mt-10">
        No appointment history found for this patient ðŸŒ¿
      </p>
    {% endif %}
  </main>

</body>
</html>
