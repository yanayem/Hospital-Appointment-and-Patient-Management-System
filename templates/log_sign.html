{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hospital Management | Login & Register</title>
    <link rel="stylesheet" href="{% static 'css/log_sign.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Logo -->
    <div class="logo">
      <a href="{% url 'homepage' %}">
        <img src="{% static 'media/logo.png' %}" alt="Logo" />
        <p>Hospital Management</p>
      </a>
    </div>

    <!-- Card Container -->
    <div class="form-container from-card" id="card-wrapper">
      <!-- LOGIN FORM -->
      <form id="login-form" class="login_container active" method="POST" action="{% url 'LogInSignUppage' %}">
        {% csrf_token %}
        <div class="row">
          <div class="input-group">
            <label for="login-email">Email</label>
            <input
              type="email"
              id="login-email"
              name="email"
              placeholder="Enter your email"
              required
            />
          </div>
        </div>
        <div class="row">
          <div class="input-group">
            <label for="login-password">Password</label>
            <div class="password-wrapper">
              <input
                type="password"
                id="login-password"
                name="password"
                placeholder="Enter password"
                required
              />
              <span class="toggle-password" onclick="togglePassword('login-password')">
                <i class="fa fa-eye"></i>
              </span>
            </div>
          </div>
        </div>
        <div class="text-link" onclick="forgotPassword()">Forgot Password?</div>
        <button type="submit" name="login" class="btn submit">
          Login
        </button>
        <div class="text-link" onclick="showSignup()">No account? Register</div>
      </form>

      <!-- SIGNUP FORM -->
      <form id="signup-form" class="signup_container" method="POST" action="{% url 'LogInSignUppage' %}">
        {% csrf_token %}
        <div class="user-type-select">
          <button type="button" class="active" data-type="patient">Patient</button>
          <button type="button" data-type="doctor">Doctor</button>
          <button type="button" data-type="admin">Admin</button>
        </div>
        <div id="signup-fields"></div>
        <button type="submit" name="signup" class="btn submit">
          Register
        </button>
        <div class="text-link" onclick="showLogin()">Already have an account? Login</div>
      </form>
    </div>

    <!-- JS -->
    <script src="{% static 'js/log_sign.js' %}"></script>
    <script>
      // Password toggle function
      function togglePassword(id){
        const input = document.getElementById(id);
        const eyeIcon = input.parentElement.querySelector('i');

        if(input.type === 'password'){
          input.type = 'text';
          eyeIcon.classList.remove('fa-eye');
          eyeIcon.classList.add('fa-eye-slash');
        } else {
          input.type = 'password';
          eyeIcon.classList.remove('fa-eye-slash');
          eyeIcon.classList.add('fa-eye');
        }
      }

      // Forgot password placeholder
      function forgotPassword(){
        alert('Redirect to forgot password page.');
      }

      // Flip forms
      const cardWrapper = document.getElementById('card-wrapper');
      function showSignup(){ cardWrapper.classList.add('flipped'); }
      function showLogin(){ cardWrapper.classList.remove('flipped'); }
    </script>
  </body>
</html>
