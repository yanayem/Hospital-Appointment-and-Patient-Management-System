{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Book Appointment</title>
<script src="https://cdn.tailwindcss.com"></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
/>

<style>
  input, select, textarea {
    transition: all 0.2s ease;
  }

  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #ec4899;
    box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.25);
  }

  @media (max-width: 1024px) {
    .ml-64 {
      margin-left: 0 !important;
    }
    main {
      padding-top: 80px !important;
    }
  }
</style>
</head>

<body
  class="bg-gradient-to-br from-pink-50 via-pink-100 to-pink-200 font-sans min-h-screen"
>
  <!-- Sidebar -->
  {% include "patient_sidebar.html" %}

  <!-- Main Section -->
  <main
    class="flex justify-center items-start lg:ml-64 px-4 sm:px-6 py-10 transition-all duration-300"
  >
    <div
      class="w-full max-w-xl bg-white rounded-3xl shadow-xl p-8 space-y-6 relative z-10"
    >
      <h1
        class="text-3xl font-bold text-pink-600 text-center mb-4 drop-shadow-sm"
      >
        Book an Appointment
      </h1>

      {% if messages %}
      <div class="space-y-2">
        {% for message in messages %}
        <div class="bg-green-100 text-green-700 px-4 py-2 rounded-lg shadow">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Appointment Form -->
      <form method="POST" class="space-y-5">
        {% csrf_token %}

        <!-- Patient Info -->
        <div>
          <label
            class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
          >
            <i class="fas fa-user text-pink-500"></i>
            <span>Patient Name</span>
          </label>
          <input
            type="text"
            name="patient_name"
            value="{{ patient.name }}"
            readonly
            class="w-full border border-pink-200 rounded-xl px-4 py-2 bg-gray-100 cursor-not-allowed"
          />
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label
              class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
            >
              <i class="fas fa-phone text-pink-500"></i>
              <span>Phone Number</span>
            </label>
            <input
              type="text"
              name="phone"
              value="{{ patient.phone }}"
              class="w-full border border-pink-200 rounded-xl px-4 py-2"
            />
          </div>
          <div>
            <label
              class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
            >
              <i class="fas fa-envelope text-pink-500"></i>
              <span>Email</span>
            </label>
            <input
              type="email"
              name="email"
              value="{{ patient.email }}"
              class="w-full border border-pink-200 rounded-xl px-4 py-2"
            />
          </div>
        </div>

        <!-- Doctor -->
        <div>
          <label
            class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
          >
            <i class="fas fa-user-doctor text-pink-500"></i>
            <span>Choose Doctor</span>
          </label>
          <select
            name="doctor"
            class="w-full border border-pink-200 rounded-xl px-4 py-2"
          >
            {% for doc in doctors %}
            <option value="{{ doc.id }}">
              {{ doc.name }} ({{ doc.specialization|default:'General' }})
            </option>
            {% endfor %}
          </select>
        </div>

        <!-- Service -->
        <div>
          <label
            class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
          >
            <i class="fas fa-stethoscope text-pink-500"></i>
            <span>Service / Treatment</span>
          </label>
          <input
            type="text"
            name="service"
            placeholder="Enter service or treatment"
            class="w-full border border-pink-200 rounded-xl px-4 py-2"
          />
        </div>

        <!-- Date / Time -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label
              class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
            >
              <i class="fas fa-calendar-days text-pink-500"></i>
              <span>Date</span>
            </label>
            <input
              type="date"
              name="date"
              min="{{ today }}"
              class="w-full border border-pink-200 rounded-xl px-4 py-2"
            />
          </div>
          <div>
            <label
              class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
            >
              <i class="fas fa-clock text-pink-500"></i>
              <span>Time</span>
            </label>
            <input
              type="time"
              name="time"
              class="w-full border border-pink-200 rounded-xl px-4 py-2"
            />
          </div>
        </div>

        <!-- Reason -->
        <div>
          <label
            class="flex items-center space-x-2 mb-1 font-semibold text-gray-700"
          >
            <i class="fas fa-clipboard text-pink-500"></i>
            <span>Reason / Notes</span>
          </label>
          <textarea
            name="reason"
            rows="3"
            placeholder="Describe your symptoms or reason..."
            class="w-full border border-pink-200 rounded-xl px-4 py-2"
          ></textarea>
        </div>

        <!-- Submit -->
        <button
          type="submit"
          class="w-full bg-pink-500 text-white font-bold py-3 rounded-2xl hover:bg-pink-600 transition transform hover:scale-105 shadow-lg flex items-center justify-center gap-2"
        >
          <i class="fas fa-heart"></i><span>Book Appointment</span>
        </button>
      </form>
    </div>
  </main>
</body>
</html>
